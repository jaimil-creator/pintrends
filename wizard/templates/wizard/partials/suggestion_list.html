{% if suggestions %}
<div class="flex justify-between items-center mb-6">
    <h5 class="text-xl font-bold">Found {{ suggestions|length }} suggestions</h5>
</div>

<div class="w-full space-y-8">
    {% regroup suggestions by base_keyword as grouped_suggestions %}

    {% for group in grouped_suggestions %}
    <div class="bg-white p-6 rounded-3xl border border-gray-100 shadow-sm">
        <h6 class="text-sm font-bold text-gray-500 uppercase tracking-wider mb-4 border-b border-gray-100 pb-2">
            Based on: <span class="text-gray-900">{{ group.grouper }}</span>
        </h6>

        <div class="flex flex-wrap gap-3">
            {% for s in group.list %}
            <div
                class="inline-flex items-center px-4 py-2 rounded-full border border-gray-200 bg-gray-50 text-gray-800 text-sm font-medium hover:bg-gray-100 transition-colors cursor-default">
                {{ s.suggestion }}
            </div>
            {% endfor %}
        </div>
    </div>
    {% endfor %}
</div>

{% else %}
<div class="text-center py-16">
    <div
        class="inline-flex items-center justify-center w-24 h-24 bg-yellow-50 rounded-full mb-6 text-yellow-500 text-5xl shadow-sm">
        <i class="bi bi-lightbulb"></i>
    </div>
    <h4 class="text-2xl font-bold text-gray-900 mb-2">Ready to explore?</h4>
    <p class="text-gray-500 mb-8 max-w-md mx-auto">Click "Refresh" to fetch the latest suggestions from Pinterest based
        on your keywords.</p>

    <button
        class="bg-pinterest-red hover:bg-[#ad081b] text-white font-bold py-3 px-8 rounded-full shadow-lg transition-transform active:scale-95 flex items-center gap-2 mx-auto"
        hx-get="{% url 'wizard:fetch_suggestions_htmx' project.id %}" hx-target="#suggestions-container"
        hx-swap="innerHTML" hx-indicator="#loading-spinner">
        <i class="bi bi-arrow-repeat"></i> Fetch Suggestions
    </button>
</div>
{% endif %}

{% if results %}
<div class="mt-8 p-6 bg-gray-50 rounded-3xl border border-gray-100">
    <h6 class="font-bold text-gray-900 mb-4">Fetch Status</h6>
    <div class="flex flex-wrap gap-2">
        {% for r in results %}
        <span
            class="px-3 py-1.5 rounded-full text-sm font-medium border
            {% if r.status == 'success' %} bg-green-50 text-green-700 border-green-100 {% else %} bg-red-50 text-red-700 border-red-100 {% endif %}">
            {{ r.keyword }}: {{ r.count }}
        </span>
        {% endfor %}
    </div>
</div>
{% endif %}