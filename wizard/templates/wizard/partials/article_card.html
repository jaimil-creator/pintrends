<div class="bg-white rounded-2xl shadow-sm border border-gray-100 p-6 hover:shadow-md transition-shadow"
    id="article-card-{{ article.id }}" hx-get="{% url 'wizard:refresh_article_card' article.id %}"
    hx-trigger="refreshArticle-{{ article.id }} from:body">
    <div class="mb-4">
        <h4 class="font-bold text-gray-900 text-lg mb-2">{{ article.title }}</h4>
        {% if article.hook %}
        <p class="text-sm text-gray-600">{{ article.hook }}</p>
        {% endif %}
    </div>

    <div class="flex items-center justify-between gap-3 pt-4 border-t border-gray-100">
        <span class="text-xs text-gray-500 truncate min-w-0">
            <i class="bi bi-tag"></i> {{ article.expanded_keyword.keyword }}
        </span>

        {% if article.blog_posts.exists %}
        <span class="text-green-600 text-xs font-medium whitespace-nowrap shrink-0">
            <i class="bi bi-check-circle-fill"></i> Generated
        </span>
        {% else %}
        <button hx-post="{% url 'wizard:generate_blog_htmx' article.id %}" hx-target="#blog-results"
            hx-swap="afterbegin" hx-indicator="#loading-indicator-{{ article.id }}"
            class="bg-pinterest-red hover:bg-[#ad081b] text-white font-semibold py-1.5 px-3 rounded-full text-xs transition-all flex items-center gap-1.5 whitespace-nowrap shrink-0">
            <i class="bi bi-stars text-[10px]"></i> Generate
        </button>
        {% endif %}
    </div>

    <!-- Loading indicator for this card -->
    <div id="loading-indicator-{{ article.id }}" class="htmx-indicator mt-4">
        <div class="flex items-center justify-center gap-3">
            <div class="w-6 h-6 border-3 border-gray-200 border-t-pinterest-red rounded-full animate-spin">
            </div>
            <span class="text-sm text-gray-600 font-medium">Generating blog...</span>
        </div>
    </div>
</div>