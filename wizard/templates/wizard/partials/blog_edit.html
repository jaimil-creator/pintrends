<!-- Blog Edit Modal -->
<div class="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4 backdrop-blur-sm">
    <form hx-post="{% url 'wizard:blog_update_htmx' blog_post.id %}" hx-target="#modal-container" hx-swap="innerHTML"
        class="bg-white rounded-3xl max-w-4xl w-full max-h-[90vh] overflow-y-auto custom-scrollbar flex flex-col"
        onclick="event.stopPropagation()">
        {% csrf_token %}

        <!-- Header -->
        <div
            class="sticky top-0 bg-white border-b border-gray-200 p-6 flex items-center justify-between rounded-t-3xl z-10">
            <h3 class="text-2xl font-bold text-gray-900">Edit Blog</h3>
            <div class="flex gap-2">
                <button type="button" hx-get="{% url 'wizard:blog_detail_htmx' blog_post.id %}"
                    hx-target="#modal-container" hx-swap="innerHTML"
                    class="px-4 py-2 rounded-full border border-gray-300 text-gray-700 font-bold hover:bg-gray-50 transition-colors">
                    Cancel
                </button>
                <button type="submit"
                    class="px-6 py-2 rounded-full bg-pinterest-red text-white font-bold hover:bg-[#ad081b] transition-colors relative">
                    Save Changes
                </button>
            </div>
        </div>

        <!-- Content -->
        <div class="p-8 space-y-8">

            <!-- Topic -->
            <div>
                <label class="block text-sm font-bold text-gray-700 mb-2 uppercase tracking-wider">Blog Title</label>
                <input type="text" name="topic" value="{{ blog_post.topic }}"
                    class="w-full px-4 py-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-pinterest-red focus:border-transparent font-bold text-lg"
                    required>
            </div>

            <!-- Intro -->
            <div>
                <label class="block text-sm font-bold text-gray-700 mb-2 uppercase tracking-wider">Introduction</label>
                <textarea name="intro" rows="5"
                    class="w-full px-4 py-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-pinterest-red focus:border-transparent leading-relaxed"
                    required>{{ blog_post.intro }}</textarea>
            </div>

            <!-- Sections -->
            <div class="space-y-6">
                <h4 class="text-xl font-bold border-b border-gray-100 pb-2">Sections</h4>
                {% for section in sections %}
                <div class="bg-gray-50 p-6 rounded-2xl border border-gray-200">
                    <input type="hidden" name="section_ids" value="{{ section.id }}">

                    <div class="mb-4">
                        <label class="block text-xs font-bold text-gray-500 mb-1 uppercase">Section Title {{
                            section.order
                            }}</label>
                        <input type="text" name="section_title_{{ section.id }}" value="{{ section.title }}"
                            class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-pinterest-red focus:border-transparent font-bold"
                            required>
                    </div>

                    <div>
                        <label class="block text-xs font-bold text-gray-500 mb-1 uppercase">Content</label>
                        <textarea name="section_description_{{ section.id }}" rows="4"
                            class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-pinterest-red focus:border-transparent leading-relaxed"
                            required>{{ section.description }}</textarea>
                    </div>
                </div>
                {% endfor %}
            </div>

            <!-- Conclusion -->
            <div>
                <label class="block text-sm font-bold text-gray-700 mb-2 uppercase tracking-wider">Conclusion</label>
                <textarea name="conclusion" rows="4"
                    class="w-full px-4 py-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-pinterest-red focus:border-transparent leading-relaxed"
                    required>{{ blog_post.conclusion }}</textarea>
            </div>
        </div>
    </form>
</div>